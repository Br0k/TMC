___________________________________________COMMANDS_______________________________________________________________________________________________________________________________________

sudo service hostapd start
sudo service dnsmasq start
sudo /usr/sbin/hostapd /etc/hostapd/hostapd.conf
_________________________________________________________________________________________________________________________________________________________________________________________

sudo mosquitto_sub -h mqtt.server -p 8883 --cafile /etc/mosquitto/ca_certificates/ecc.ca.cert.pem -t "/esp8266" -u esp8266 -P esp8266 -d --tls-version tlsv1.2


______________________________________________CA_________________________________________________________________________________________________________________________________________

openssl ecparam -out ecc.ca.key.pem -name prime256v1 -genkey

openssl req -config <(printf "[req]\ndistinguished_name=dn\n[dn]\n[ext]\nbasicConstraints=CA:TRUE") -new -nodes -subj "/C=FR/L=Limoges/O=TMC/OU=IOT/CN=mqtt.server" -x509 -extensions ext -sha256 -key ecc.ca.key.pem -text -out ecc.ca.cert.pem

___________________________________________SERVER________________________________________________________________________________________________________________________________________

openssl genrsa -out server.key 2048

openssl ecparam -out server.key -name prime256v1 -genkey

openssl req -new -out server.csr -key server.key

openssl x509 -req -in server.csr -CA ../ecc.ca.cert.pem -CAkey ../ecc.ca.key.pem -CAcreateserial -out server.crt -days 360

___________________________________________ESP8266________________________________________________________________________________________________________________________________________

openssl ecparam -out client.key -name prime256v1 -genkey

openssl req -config <(printf "[req]\ndistinguished_name=dn\n[dn]\n[ext]\nbasicConstraints=CA:FALSE") -new -subj "/C=FR/L=Limoges/O=TMC/OU=IOT/CN=mqtt.server" -reqexts ext -sha256 -key client.key -text -out client.csr


openssl x509 -req -days 3650 -CA ecc.ca.cert.pem -CAkey ecc.ca.key.pem -CAcreateserial -extfile <(printf "basicConstraints=critical,CA:FALSE") -in client.csr -text  -out client.esp8266.crt -addtrust clientAuth

